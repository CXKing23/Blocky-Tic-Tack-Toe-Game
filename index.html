<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Toolbox Customization Codelab</title>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
     <script src="index.js"></script>
    <script src="custom_category.js"></script>    
    <link rel="stylesheet" href="toolbox_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <script src="toolbox_label.js"></script>




      <style>
      html,
      body {
        height: 100%;
      }

      body {
        background-color: #fff;
        font-family: sans-serif;
        overflow: hidden;
      }

      h1 {
        font-weight: normal;
        font-size: 140%;
        margin: 10px;
      }

      #blocklyDiv {
        float: left;
        height: 90%;
        width: 60%;
      }

      #gameDiv {
        float: right;
        width: 35%;
        height: 90%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      #board {
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-template-rows: repeat(3, 100px);
        gap: 5px;
        margin-bottom: 20px;
      }

      .cell {
        width: 100px;
        height: 100px;
        border: 1px solid black;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2em;
        cursor: pointer;
      }
    </style>
  </head>

  <body onload="start()">
    <h1>Tic-Tac-Toe with Blockly - Coding Coach</h1>
    <div id="blocklyDiv"></div>
    <div id="gameDiv">
      <div id="levelDisplay" style="font-weight: bold; margin-bottom: 5px;">Level 1: The Edge Mistake</div>
      <div id="julesMessage" style="background-color: #f0f0f0; padding: 10px; margin-bottom: 10px; border-radius: 5px; border-left: 5px solid #007bff; font-style: italic;">
        "The center is the most valuable real estate! If they give it up, take it."
      </div>
      <div id="status">Your turn (X)</div>
      <div id="board">
        <div class="cell" data-row="1" data-col="1"></div>
        <div class="cell" data-row="1" data-col="2"></div>
        <div class="cell" data-row="1" data-col="3"></div>
        <div class="cell" data-row="2" data-col="1"></div>
        <div class="cell" data-row="2" data-col="2"></div>
        <div class="cell" data-row="2" data-col="3"></div>
        <div class="cell" data-row="3" data-col="1"></div>
        <div class="cell" data-row="3" data-col="2"></div>
        <div class="cell" data-row="3" data-col="3"></div>
      </div>
      <button onclick="runCode()">Run Code</button>
      <button onclick="restartGame()">Restart Game</button>
    </div>

    <!-- Toolbox Definition -->
   <xml
      xmlns="https://developers.google.com/blockly/xml"
      id="toolbox-categories"
      style="display: none">
        <toolboxlabel></toolboxlabel>

        <category css-icon="customIcon fa fa-cog" name="Logic" categorystyle="logic_category">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
        </category>

        <category name="Loops" categorystyle="loop_category">
            <block type="controls_repeat_ext">
                <value name="TIMES">
                    <shadow type="math_number">
                        <field name="NUM">5</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_whileUntil"></block>
        </category>

        <category name="Math" categorystyle="math_category">
            <block type="math_number">
                <field name="NUM">1</field>
            </block>
            <block type="math_arithmetic"></block>
            <block type="math_random_int">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">3</field>
                    </shadow>
                </value>
            </block>
        </category>

        <category name="Tic-Tac-Toe" categorystyle="logic_category">
            <block type="place_x_at">
                <value name="ROW">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
                <value name="COL">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
            </block>
            <block type="is_square_empty">
                <value name="ROW">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
                <value name="COL">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
            </block>
            <block type="place_x_random"></block>
            <block type="set_difficulty"></block>
        </category>

        <category name="Variables" categorystyle="variable_category" custom="VARIABLE"></category>

        <sep></sep>

        <category name="Secrets" colour="#FFD700">
            <label text="--- Level 1 Solution ---"></label>
            <block type="place_x_at">
                <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
            </block>
            
            <label text="--- Level 2 Solution ---"></label>
            <block type="place_x_at">
                <value name="ROW"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                <value name="COL"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
            </block>

            <label text="--- Level 3 Logic ---"></label>
            <block type="controls_if">
                <mutation else="1"></mutation>
                <value name="IF0">
                    <block type="is_square_empty">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                    </block>
                </value>
                <statement name="DO0">
                    <block type="place_x_at">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                    </block>
                </statement>
                <statement name="ELSE">
                    <block type="place_x_at">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                    </block>
                </statement>
            </block>
        </category>
    </xml>
  </body>
</html>
