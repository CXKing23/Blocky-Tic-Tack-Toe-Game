<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Toolbox Customization Codelab</title>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
     <script src="index.js"></script>
    <script src="custom_category.js"></script>    
    <link rel="stylesheet" href="toolbox_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <script src="toolbox_label.js"></script>




      <style>
      html,
      body {
        height: 100%;
      }

      body {
        background-color: #fff;
        font-family: sans-serif;
        overflow: hidden;
      }

      h1 {
        font-weight: normal;
        font-size: 140%;
        margin: 10px;
      }

      #blocklyDiv {
        float: left;
        height: 90%;
        width: 60%;
      }

      #gameDiv {
        float: right;
        width: 35%;
        height: 90%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      #boardsContainer {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
        width: 100%;
        max-width: 450px;
      }

      .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        gap: 2px;
        aspect-ratio: 1;
        background-color: #eee;
        padding: 2px;
        border: 2px solid #333;
      }

      .cell {
        background-color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5em;
        cursor: pointer;
        font-weight: bold;
      }
    </style>
  </head>

  <body onload="start()">
    <h1>Tic-Tac-Toe with Blockly - Coding Coach</h1>
    <div id="blocklyDiv"></div>
    <div id="gameDiv">
      <div id="levelDisplay" style="font-weight: bold; margin-bottom: 5px;">Level 1: The Edge Mistake</div>
      <div id="julesMessage" style="background-color: #f0f0f0; padding: 10px; margin-bottom: 10px; border-radius: 5px; border-left: 5px solid #007bff; font-style: italic;">
        "The center is the most valuable real estate! If they give it up, take it."
      </div>
      <div id="status">Your turn (X)</div>
      <div id="boardsContainer">
        <!-- Boards will be generated dynamically or hardcoded below -->
        <div id="board0" class="board"></div>
        <div id="board1" class="board"></div>
        <div id="board2" class="board"></div>
        <div id="board3" class="board"></div>
      </div>
      <div style="display: flex; gap: 10px;">
          <button onclick="runCode()">Run/Restart</button>
          <button onclick="continueGame()">Continue</button>
          <button onclick="restartGame()">Reset</button>
      </div>
    </div>

    <!-- Toolbox Definition -->
   <xml
      xmlns="https://developers.google.com/blockly/xml"
      id="toolbox-categories"
      style="display: none">
        <toolboxlabel></toolboxlabel>

        <category css-icon="customIcon fa fa-cog" name="Logic" categorystyle="logic_category">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
        </category>

        <category name="Loops" categorystyle="loop_category">
            <block type="controls_repeat_ext">
                <value name="TIMES">
                    <shadow type="math_number">
                        <field name="NUM">5</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_whileUntil"></block>
        </category>

        <category name="Math" categorystyle="math_category">
            <block type="math_number">
                <field name="NUM">1</field>
            </block>
            <block type="math_arithmetic"></block>
            <block type="math_random_int">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">3</field>
                    </shadow>
                </value>
            </block>
          </value>
        </block>
        <block type="text_changeCase">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>
        <block type="text_trim">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>
        <block type="text_count">
          <value name="SUB">
            <shadow type="text"></shadow>
          </value>
          <value name="TEXT">
            <shadow type="text"></shadow>
          </value>
        </block>
        <block type="text_replace">
          <value name="FROM">
            <shadow type="text"></shadow>
          </value>
          <value name="TO">
            <shadow type="text"></shadow>
          </value>
          <value name="TEXT">
            <shadow type="text"></shadow>
          </value>
        </block>
        <block type="text_reverse">
          <value name="TEXT">
            <shadow type="text"></shadow>
          </value>
        </block>
        <label text="Input/Output:" web-class="ioLabel"></label>
        <block type="text_print">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>
        <block type="text_prompt_ext">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>
      </category>
      <category name="Tic-Tac-Toe" categorystyle="logic_category">
        <block type="place_x_at"></block>
        <block type="is_square_empty"></block>
        <block type="place_x_random"></block>
        <block type="set_difficulty"></block>
        <block type="has_player_moved"></block>
      </category>
      <category name="Hints" custom="HINTS" categorystyle="text_category"></category>
      <category name="Secrets" custom="SECRETS" categorystyle="variable_category"></category>
      <category name="Lists" categorystyle="list_category">
        <block type="lists_create_with">
          <mutation items="0"></mutation>
        </block>
        <block type="lists_create_with"></block>
        <block type="lists_repeat">
          <value name="NUM">
            <shadow type="math_number">
              <field name="NUM">5</field>
            </shadow>
          </value>
        </block>
        <block type="lists_length"></block>
        <block type="lists_isEmpty"></block>
        <block type="lists_indexOf">
          <value name="VALUE">
            <block type="variables_get">
              <field name="VAR">list</field>
            </block>
            <block type="is_square_empty">
                <value name="ROW">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
                <value name="COL">
                    <shadow type="math_number">
                        <field name="NUM">2</field>
                    </shadow>
                </value>
            </block>
            <block type="place_x_random"></block>
            <block type="set_difficulty"></block>
        </category>

        <category name="Variables" categorystyle="variable_category" custom="VARIABLE"></category>

        <sep></sep>

        <category name="Secrets" colour="#FFD700">
            <label text="--- Level 1 Solution ---"></label>
            <block type="place_x_at">
                <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
            </block>
            
            <label text="--- Level 2 Solution ---"></label>
            <block type="place_x_at">
                <value name="ROW"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                <value name="COL"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
            </block>

            <label text="--- Level 3 Logic ---"></label>
            <block type="controls_if">
                <mutation else="1"></mutation>
                <value name="IF0">
                    <block type="is_square_empty">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                    </block>
                </value>
                <statement name="DO0">
                    <block type="place_x_at">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">2</field></shadow></value>
                    </block>
                </statement>
                <statement name="ELSE">
                    <block type="place_x_at">
                        <value name="ROW"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                        <value name="COL"><shadow type="math_number"><field name="NUM">1</field></shadow></value>
                    </block>
                </statement>
            </block>
        </category>
    </xml>
  </body>
</html>
